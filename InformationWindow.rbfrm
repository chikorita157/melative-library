#tag WindowBegin Window InformationWindow   BackColor       =   16777215   Backdrop        =   ""   CloseButton     =   True   Composite       =   True   Frame           =   3   FullScreen      =   False   HasBackColor    =   False   Height          =   4.08e+2   ImplicitInstance=   True   LiveResize      =   False   MacProcID       =   0   MaxHeight       =   402   MaximizeButton  =   False   MaxWidth        =   ""   MenuBar         =   ""   MenuBarVisible  =   True   MinHeight       =   ""   MinimizeButton  =   True   MinWidth        =   ""   Placement       =   0   Resizeable      =   False   Title           =   "Inspector"   Visible         =   True   Width           =   2.78e+2   Begin TextArea Description      AcceptTabs      =   ""      Alignment       =   0      AutoDeactivate  =   True      BackColor       =   16777215      Bold            =   ""      Border          =   True      DataField       =   ""      DataSource      =   ""      Enabled         =   True      Format          =   ""      Height          =   77      HelpTag         =   ""      HideSelection   =   True      Index           =   -2147483648      InitialParent   =   ""      Italic          =   ""      Left            =   7      LimitText       =   0      LockBottom      =   ""      LockedInPosition=   False      LockLeft        =   True      LockRight       =   ""      LockTop         =   True      Mask            =   ""      Multiline       =   True      ReadOnly        =   True      Scope           =   0      ScrollbarHorizontal=   ""      ScrollbarVertical=   True      Styled          =   True      TabIndex        =   3      TabPanelIndex   =   0      TabStop         =   True      Text            =   ""      TextColor       =   0      TextFont        =   "System"      TextSize        =   12      TextUnit        =   0      Top             =   22      Underline       =   ""      UseFocusRing    =   False      Visible         =   True      Width           =   264   End   Begin StaticText seriestitle      AutoDeactivate  =   True      Bold            =   True      DataField       =   ""      DataSource      =   ""      Enabled         =   True      Height          =   20      HelpTag         =   ""      Index           =   -2147483648      InitialParent   =   ""      Italic          =   ""      Left            =   9      LockBottom      =   ""      LockedInPosition=   False      LockLeft        =   True      LockRight       =   ""      LockTop         =   True      Multiline       =   ""      Scope           =   0      TabIndex        =   6      TabPanelIndex   =   0      Text            =   ""      TextAlign       =   0      TextColor       =   0      TextFont        =   "System"      TextSize        =   ""      TextUnit        =   0      Top             =   0      Underline       =   ""      Visible         =   True      Width           =   261   End   Begin GroupBox GroupBox1      AutoDeactivate  =   True      Bold            =   ""      Caption         =   "Base Information"      Enabled         =   True      Height          =   102      HelpTag         =   ""      Index           =   -2147483648      InitialParent   =   ""      Italic          =   ""      Left            =   8      LockBottom      =   ""      LockedInPosition=   False      LockLeft        =   True      LockRight       =   ""      LockTop         =   True      Scope           =   0      TabIndex        =   7      TabPanelIndex   =   0      TextFont        =   "System"      TextSize        =   11      TextUnit        =   0      Top             =   103      Underline       =   ""      Visible         =   True      Width           =   260      Begin TextArea BaseInformation         AcceptTabs      =   ""         Alignment       =   0         AutoDeactivate  =   True         BackColor       =   16777215         Bold            =   ""         Border          =   True         DataField       =   ""         DataSource      =   ""         Enabled         =   True         Format          =   ""         Height          =   76         HelpTag         =   ""         HideSelection   =   True         Index           =   -2147483648         InitialParent   =   "GroupBox1"         Italic          =   ""         Left            =   15         LimitText       =   0         LockBottom      =   ""         LockedInPosition=   False         LockLeft        =   True         LockRight       =   ""         LockTop         =   True         Mask            =   ""         Multiline       =   True         ReadOnly        =   True         Scope           =   0         ScrollbarHorizontal=   ""         ScrollbarVertical=   True         Styled          =   True         TabIndex        =   0         TabPanelIndex   =   0         TabStop         =   True         Text            =   ""         TextColor       =   0         TextFont        =   "System"         TextSize        =   12         TextUnit        =   0         Top             =   121         Underline       =   ""         UseFocusRing    =   False         Visible         =   True         Width           =   246      End   End   Begin GroupBox GroupBox2      AutoDeactivate  =   True      Bold            =   ""      Caption         =   "Resources"      Enabled         =   True      Height          =   116      HelpTag         =   ""      Index           =   -2147483648      InitialParent   =   ""      Italic          =   ""      Left            =   8      LockBottom      =   ""      LockedInPosition=   False      LockLeft        =   True      LockRight       =   ""      LockTop         =   True      Scope           =   0      TabIndex        =   8      TabPanelIndex   =   0      TextFont        =   "System"      TextSize        =   11      TextUnit        =   0      Top             =   209      Underline       =   ""      Visible         =   True      Width           =   260      Begin Listbox Resourcelistbox         AutoDeactivate  =   True         AutoHideScrollbars=   True         Bold            =   ""         Border          =   True         ColumnCount     =   1         ColumnsResizable=   ""         ColumnWidths    =   ""         DataField       =   ""         DataSource      =   ""         DefaultRowHeight=   -1         Enabled         =   True         EnableDrag      =   ""         EnableDragReorder=   ""         GridLinesHorizontal=   0         GridLinesVertical=   0         HasHeading      =   ""         HeadingIndex    =   -1         Height          =   90         HelpTag         =   ""         Hierarchical    =   ""         Index           =   -2147483648         InitialParent   =   "GroupBox2"         InitialValue    =   ""         Italic          =   ""         Left            =   15         LockBottom      =   ""         LockedInPosition=   False         LockLeft        =   True         LockRight       =   ""         LockTop         =   True         RequiresSelection=   ""         Scope           =   0         ScrollbarHorizontal=   ""         ScrollBarVertical=   True         SelectionType   =   0         TabIndex        =   0         TabPanelIndex   =   0         TabStop         =   True         TextFont        =   "System"         TextSize        =   12         TextUnit        =   0         Top             =   229         Underline       =   ""         UseFocusRing    =   False         Visible         =   True         Width           =   246         _ScrollWidth    =   -1      End   End   Begin BevelButton BevelButton1      AcceptFocus     =   False      AutoDeactivate  =   True      BackColor       =   "&c000000"      Bevel           =   1      Bold            =   False      ButtonType      =   0      Caption         =   ""      CaptionAlign    =   3      CaptionDelta    =   0      CaptionPlacement=   1      Enabled         =   False      HasBackColor    =   False      HasMenu         =   2      Height          =   22      HelpTag         =   ""      Icon            =   1763761494      IconAlign       =   0      IconDX          =   0      IconDY          =   0      Index           =   -2147483648      InitialParent   =   ""      Italic          =   False      Left            =   243      LockBottom      =   ""      LockedInPosition=   False      LockLeft        =   True      LockRight       =   ""      LockTop         =   True      MenuValue       =   0      Scope           =   0      TabIndex        =   9      TabPanelIndex   =   0      TabStop         =   True      TextColor       =   "&c000000"      TextFont        =   "System"      TextSize        =   ""      TextUnit        =   0      Top             =   379      Underline       =   True      Value           =   False      Visible         =   True      Width           =   25   End   Begin GroupBox GroupBox3      AutoDeactivate  =   True      Bold            =   ""      Caption         =   "Recommendation"      Enabled         =   True      Height          =   47      HelpTag         =   ""      Index           =   -2147483648      InitialParent   =   ""      Italic          =   ""      Left            =   8      LockBottom      =   ""      LockedInPosition=   False      LockLeft        =   True      LockRight       =   ""      LockTop         =   True      Scope           =   0      TabIndex        =   10      TabPanelIndex   =   0      TextFont        =   "System"      TextSize        =   11      TextUnit        =   0      Top             =   326      Underline       =   ""      Visible         =   True      Width           =   260      Begin BevelButton BevelButton2         AcceptFocus     =   False         AutoDeactivate  =   True         BackColor       =   "&c000000"         Bevel           =   3         Bold            =   False         ButtonType      =   0         Caption         =   "Recommend this Title"         CaptionAlign    =   3         CaptionDelta    =   0         CaptionPlacement=   1         Enabled         =   False         HasBackColor    =   False         HasMenu         =   0         Height          =   22         HelpTag         =   "Recommend the Current Title"         Icon            =   ""         IconAlign       =   0         IconDX          =   0         IconDY          =   0         Index           =   -2147483648         InitialParent   =   "GroupBox3"         Italic          =   False         Left            =   58         LockBottom      =   ""         LockedInPosition=   False         LockLeft        =   True         LockRight       =   ""         LockTop         =   True         MenuValue       =   0         Scope           =   0         TabIndex        =   0         TabPanelIndex   =   0         TabStop         =   True         TextColor       =   "&c000000"         TextFont        =   "System"         TextSize        =   11         TextUnit        =   0         Top             =   345         Underline       =   False         Value           =   False         Visible         =   True         Width           =   161      End   EndEnd#tag EndWindow#tag WindowCode	#tag Event		Sub Activate()		  KeyboardUIMode.SetControls(self,KeyboardUIMode.GetMode)		End Sub	#tag EndEvent	#tag Event		Sub Close()		  Window1.infowindow = false		End Sub	#tag EndEvent	#tag Event		Sub Open()		  //set up yourlist listbox		  Resourcelistbox.columncount=2		  Resourcelistbox.columnwidths="0,100%"		  Resourcelistbox.HasHeading=True		  Resourcelistbox.Heading(0)="ID"		  Resourcelistbox.Heading(1)="Resource"		  Resourcelistbox.Column(0).UserResizable=false		  		  //Move window position		  me.top = window1.top		  me.left = window1.left + window1.width + 10		End Sub	#tag EndEvent	#tag Method, Flags = &h0		Sub loadcontext(rootxml as xmlnode)		  dim p as new xmlnodelist		  dim d as new dictionary		  dim  i  as integer		  p = getanything(rootxml,"//response/context")		  d = parseAnime(p.Item(0))		  If d.haskey("description") = true then		    description.text = ReplaceAll(d.value("description"),"<br />", EndOfLine)		  else		    description.text = "No description for this title"		  end if		  		End Sub	#tag EndMethod	#tag Method, Flags = &h0		Sub loadmelativexml()		  dim socket1 as new httpsocket		  dim listdata as string		  dim r as xmlnode		  socket1.yield = true		  listdata= socket1.get("http://melative.com/api/entity/metab.xml?" + Window1.mediatype + "=" + EncodeURLComponent(seriestitle.text) ,10)		  If socket1.httpstatuscode = 200 then		    //reset everything		    baseinformation.text =  ""		    description.text = ""		    resourcelistbox.deleteallrows		    //start loading		    dim XML as new XMLDocument		    xml.LoadXML(listdata)		    r = getXMLroot(xml)		    loadresources(r)		    loadcontext(r)		    loadproperties(r)		  end if		End Sub	#tag EndMethod	#tag Method, Flags = &h0		Sub loadproperties(rootxml as xmlnode)		  dim p as new xmlnodelist		  dim p2 as new xmlnodelist		  dim d as new dictionary		  dim d2 as new dictionary		  dim i  as integer		  p = getanything(rootxml,"//response/context/property-list")		  try		    d = parseAnime(p.Item(0))		    for i = 0 to d.count -1		      p2 = getanything(rootxml,"//response/context/property-list/" + d.key(i))		      d2 = parseAnime(p2.Item(0))		      If i = 0 then		        baseinformation.text = d.key(i) + " : "+ d2.value(d2.key(0))		      else		        baseinformation.text = d.key(i) + " : "+ d2.value(d2.key(0)) + endofline + baseinformation.text		      end if		    next		  catch		    baseinformation.text ="No base information available."		  end try		End Sub	#tag EndMethod	#tag Method, Flags = &h0		Sub loadresources(rootxml as xmlnode)		  dim p as new xmlnodelist		  dim d as new dictionary		  dim c , i  as integer		  try		    p = getanything(rootxml,"//response/context/resource-list/resource")		    c = p.Length - 1		    for i = 0 to c		      d = parseAnime(p.Item(i))		      Resourcelistbox.AddRow(d.Value("url"))		      If d.haskey("title")  then		        Resourcelistbox.Cell(Resourcelistbox.LastIndex, 1) = d.value("title")		        Resourcelistbox.CellHelpTag(Resourcelistbox.LastIndex, 1) = d.value("url")		      else		        Resourcelistbox.Cell(Resourcelistbox.LastIndex, 1) = d.Value("url")		      end if		    next		  catch		  end try		  		End Sub	#tag EndMethod	#tag Property, Flags = &h0		mediatype As string	#tag EndProperty#tag EndWindowCode#tag Events Resourcelistbox	#tag Event		Sub DoubleClick()		  showurl me.cell(me.listindex,0)		End Sub	#tag EndEvent	#tag Event		Function CellBackgroundPaint(g As Graphics, row As Integer, column As Integer) As Boolean		  #If TargetMacOS		    if row mod 2 = 0 then		      g.forecolor = GetThemeColor(kThemeBrushListViewOddRowBackground)		    else		      g.forecolor = GetThemeColor(kThemeBrushListViewEvenRowBackground)		    end		    g.fillrect(0,0,g.width,g.height)		  #endif		End Function	#tag EndEvent#tag EndEvents#tag Events BevelButton1	#tag Event		Sub Open()		  me.addrow "Lood this Title's Info Page"		  me.addrow "More Information"		End Sub	#tag EndEvent	#tag Event		Sub Action()		  If me.MenuValue = 0 then		    showurl "http://melative.com/"+ window1.mediatype + "/" + EncodeURLComponent(seriestitle.text)		  elseif me.MenuValue = 1 then		    ShowMoreInfowindow(seriestitle.text,mediatype)		  end if		End Sub	#tag EndEvent#tag EndEvents#tag Events BevelButton2	#tag Event		Sub Action()		  RecommendTitle(seriestitle.text,mediatype)		End Sub	#tag EndEvent#tag EndEvents